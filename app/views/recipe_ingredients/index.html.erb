<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.11.4/datatables.min.css"/>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.11.4/datatables.min.js"></script>
<%= javascript_include_tag "dt-setup" %>
<p style="color: green"><%= notice %></p>
<h1>Recipe ingredients</h1>
<%= link_to "New recipe ingredient", new_recipe_ingredient_path %>
<div id="recipe_ingredients" class="content-scroller">
  <table class="dt-table">
    <thead>
      <tr>
        <th>Recipe Name (ID)</th>
        <th>Ingredient Name (ID)</th>
        <th>Amount</th>
        <th>Unit Name (ID)</th>
        <th>Preparation Instructions</th>
        <% if current_user.admin %>
          <th>User Email (ID)</th>
          <th>Global</th>
        <% end %>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @recipe_ingredients.each do |recipe_ingredient| %>
        <tr>
          <td><%= Recipe.find_by(id: recipe_ingredient.recipe_id).name + " (" + recipe_ingredient.recipe_id.to_s + ")" %></td>
          <td><%= link_to Ingredient.find_by(id: recipe_ingredient.ingredient_id).name + " (" + recipe_ingredient.ingredient_id.to_s + ")", recipe_ingredient %></td>
          <td><%= recipe_ingredient.amount %></td>
          <td><%= Unit.find_by(id: recipe_ingredient.unit_id).name + " (" + recipe_ingredient.unit_id.to_s + ")" %></td>
          <td><%= recipe_ingredient.prep_instructions %></td>
          <% if current_user.admin %>
            <td><%= User.find_by(id: recipe_ingredient.user_id).email + " (" + recipe_ingredient.user_id.to_s + ")" %></td>
            <td><%= recipe_ingredient.global %></td>
          <% end %>
            <td><%= button_to "Delete", recipe_ingredient, method: :delete,class:"lBtn" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>


